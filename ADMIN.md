# Admin Dashboard ä½¿ç”¨æŒ‡å—

## è®¿é—®ç®¡ç†ç•Œé¢

å¯åŠ¨æœåŠ¡åï¼Œè®¿é—®ä»¥ä¸‹ URLï¼š

```
http://localhost:8080/_admin/
```

## åŠŸèƒ½ç‰¹æ€§

### 1. å®æ—¶ç»Ÿè®¡

ç®¡ç†ç•Œé¢ä¼šè‡ªåŠ¨æ¯ 5 ç§’åˆ·æ–°ä¸€æ¬¡ç»Ÿè®¡æ•°æ®ï¼Œæ˜¾ç¤ºï¼š

- **Cache Hits**: ç¼“å­˜å‘½ä¸­æ¬¡æ•°
- **Cache Misses**: ç¼“å­˜æœªå‘½ä¸­æ¬¡æ•°
- **Hit Rate**: ç¼“å­˜å‘½ä¸­ç‡ç™¾åˆ†æ¯”
- **Downloaded**: ä»ä¸Šæ¸¸ä¸‹è½½çš„æ€»å­—èŠ‚æ•°
- **Active Locks**: å½“å‰æ´»è·ƒçš„ä¸‹è½½ä»»åŠ¡æ•°
- **Cache Size**: ç¼“å­˜ç›®å½•å ç”¨çš„ç£ç›˜ç©ºé—´

### 2. æœåŠ¡å™¨ä¿¡æ¯

æ˜¾ç¤ºå½“å‰æœåŠ¡å™¨é…ç½®ï¼š

- Listen Address: ç›‘å¬åœ°å€
- Cache Directory: ç¼“å­˜ç›®å½•è·¯å¾„
- Upstream Server: ä¸Šæ¸¸æœåŠ¡å™¨åœ°å€
- Index Cache Duration: ç´¢å¼•æ–‡ä»¶ç¼“å­˜æ—¶é—´
- SOCKS5 Proxy: ä»£ç†é…ç½®ï¼ˆå¦‚æœæœ‰ï¼‰

### 3. æ“ä½œæŒ‰é’®

- **ğŸ”„ Refresh Stats**: æ‰‹åŠ¨åˆ·æ–°ç»Ÿè®¡æ•°æ®
- **ğŸ“Š View Metrics**: åœ¨æ–°æ ‡ç­¾é¡µæ‰“å¼€ Prometheus metrics ç«¯ç‚¹
- **ğŸ—‘ï¸ Clear Cache**: æ¸…ç©ºæ‰€æœ‰ç¼“å­˜æ–‡ä»¶ï¼ˆéœ€è¦ç¡®è®¤ï¼‰

## API ç«¯ç‚¹

### è·å–ç»Ÿè®¡æ•°æ®

```bash
GET /_admin/stats
```

å“åº”ç¤ºä¾‹ï¼š

```json
{
  "cache_hits": 1234,
  "cache_misses": 56,
  "download_bytes": 1048576000,
  "active_locks": 2,
  "cache_size": 524288000,
  "listen_addr": ":8080",
  "cache_dir": "./cache",
  "upstream": "https://dl-cdn.alpinelinux.org",
  "index_cache_duration": "24h0m0s",
  "proxy": "socks5://127.0.0.1:1080"
}
```

### æ¸…ç©ºç¼“å­˜

```bash
POST /_admin/clear
```

å“åº”ç¤ºä¾‹ï¼š

```json
{
  "status": "success",
  "message": "Cache cleared successfully"
}
```

## ä¸ Prometheus é›†æˆ

ç®¡ç†ç•Œé¢å¯ä»¥ç›´æ¥é“¾æ¥åˆ° Prometheus metrics ç«¯ç‚¹ï¼š

```
http://localhost:8080/metrics
```

ä½ å¯ä»¥é…ç½® Prometheus æ¥æŠ“å–è¿™äº› metricsï¼Œæˆ–è€…ä½¿ç”¨ Grafana åˆ›å»ºä»ªè¡¨æ¿ã€‚

## å®‰å…¨å»ºè®®

âš ï¸ **é‡è¦**: ç®¡ç†ç•Œé¢ç›®å‰æ²¡æœ‰è®¤è¯æœºåˆ¶ã€‚åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œå»ºè®®ï¼š

1. ä½¿ç”¨é˜²ç«å¢™é™åˆ¶è®¿é—®
2. æ·»åŠ åå‘ä»£ç†ï¼ˆå¦‚ Nginxï¼‰è¿›è¡Œ HTTP åŸºæœ¬è®¤è¯
3. åªåœ¨å†…ç½‘ä¸­æš´éœ²ç®¡ç†ç«¯å£

### Nginx åå‘ä»£ç†ç¤ºä¾‹

```nginx
location /_admin/ {
    auth_basic "Admin Area";
    auth_basic_user_file /etc/nginx/.htpasswd;
    proxy_pass http://localhost:8080;
}
```

### åˆ›å»ºå¯†ç æ–‡ä»¶

```bash
htpasswd -c /etc/nginx/.htpasswd admin
```

## æˆªå›¾

è®¿é—® `http://localhost:8080/_admin/` åï¼Œä½ ä¼šçœ‹åˆ°ï¼š

- ç°ä»£åŒ–çš„å“åº”å¼ç•Œé¢
- å®æ—¶æ›´æ–°çš„ç»Ÿè®¡å¡ç‰‡
- æ¸…æ™°çš„æœåŠ¡å™¨ä¿¡æ¯å±•ç¤º
- æ˜“ç”¨çš„æ“ä½œæŒ‰é’®

## æ•…éšœæ’é™¤

### ç»Ÿè®¡æ•°æ®ä¸æ›´æ–°

æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°æ˜¯å¦æœ‰é”™è¯¯ã€‚ç¡®ä¿ï¼š

1. æœåŠ¡å™¨æ­£å¸¸è¿è¡Œ
2. æ²¡æœ‰ CORS é—®é¢˜
3. `/_admin/stats` ç«¯ç‚¹å¯è®¿é—®

### æ¸…ç©ºç¼“å­˜å¤±è´¥

æ£€æŸ¥ï¼š

1. ç¼“å­˜ç›®å½•æƒé™
2. æœåŠ¡å™¨æ—¥å¿—ä¸­çš„é”™è¯¯ä¿¡æ¯
3. ç£ç›˜ç©ºé—´æ˜¯å¦å……è¶³

## æœªæ¥å¢å¼º

è®¡åˆ’æ·»åŠ çš„åŠŸèƒ½ï¼š

- [ ] çƒ­é—¨åŒ…ç»Ÿè®¡
- [ ] å†å²è¶‹åŠ¿å›¾è¡¨
- [ ] æŒ‰æ—¶é—´æ¸…ç†ç¼“å­˜
- [ ] æŒ‰å¤§å°é™åˆ¶ç¼“å­˜
- [ ] ç”¨æˆ·è®¤è¯
- [ ] æ“ä½œæ—¥å¿—
